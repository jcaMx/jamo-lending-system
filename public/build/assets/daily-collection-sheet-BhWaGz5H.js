import{c as G,r as M,j as t,H as J}from"./app-BRqMUDle.js";import{A as Q}from"./app-layout-BOi6nSwN.js";import{B as X}from"./index-CP3CLzCk.js";import"./app-2n5eZ1ed.js";import"./utils-D0Zg16Wk.js";import"./index-C5BaN0Sf.js";import"./index-B59bIE-Z.js";import"./routes-D939kiBV.js";const Y=[{title:"Daily Collection Sheet",href:"/dcs"}];function xe(l){const e=G.c(67),{due_loans:i}=l,[o,W]=M.useState(""),[a,q]=M.useState(""),[d,O]=M.useState(!1),V=M.useRef(null);let m,p,h,x,f,r,u,y,b,n,g,c;if(e[0]!==i||e[1]!==o||e[2]!==a){let R;e[15]!==o||e[16]!==a?(R=s=>{const K=s.collector??"",U=s.collection_date??"";return K.toLowerCase().includes(o.toLowerCase())&&(a?U===a:!0)},e[15]=o,e[16]=a,e[17]=R):R=e[17];const z=i.filter(R);p=()=>{const s=["#","Borrower","Loan No","Principal","Interest","Penalty","Total Due (₱)"],K=z.map(ae),U="data:text/csv;charset=utf-8,"+[s,...K].map(se).join(`
`),B=document.createElement("a");B.href=encodeURI(U),B.download="Daily_Collection_Sheet.csv",document.body.appendChild(B),B.click(),document.body.removeChild(B),O(!1)};let A;e[18]===Symbol.for("react.memo_cache_sentinel")?(A=()=>{if(!V.current)return;const s=window.open("","","width=900,height=650");s&&(s.document.write(`
      <html>
        <head>
          <title>Daily Collection Sheet</title>
          
      <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
      <style>
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #666; padding: 6px; text-align: left; }
        th { background: #f3f3f3; }
      </style>
    
        </head>
        <body class="p-10 font-sans text-gray-800">
          <header class="text-center border-b pb-6 mb-8">
            <div style="display: flex; justify-content: center;">
              <img src="/images/jamo-logo-2.png" class="h-20 mb-3" alt="Logo" />
            </div>
            <h1 class="text-2xl font-bold tracking-wide">Daily Collection Sheet</h1>
            <p class="text-sm text-gray-600 mt-1">Purok 1B Kisante, Makilala, North Cotabato Philippines</p>
            <p class="text-sm text-gray-600 mt-1">+639120313776</p>
          </header>
          <main class="prose max-w-none">${V.current.innerHTML}</main>
          <footer class="mt-12 text-center text-xs text-gray-500 border-t pt-4">Page 1</footer>
        </body>
      </html>
    `),s.document.close(),s.onload=()=>s.print(),O(!1))},e[18]=A):A=e[18],h=A,m=Q,g=Y,e[19]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(J,{title:"Daily Collection Sheet"}),e[19]=c):c=e[19],b="bg-white rounded-lg  p-6 space-y-4";let F;e[20]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Daily Collection Sheet"}),e[20]=F):F=e[20];let H;e[21]===Symbol.for("react.memo_cache_sentinel")?(H=s=>W(s.target.value),e[21]=H):H=e[21];let I;e[22]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx("option",{value:"",children:"All Collectors"}),e[22]=I):I=e[22];let _;e[23]!==i?(_=new Set(i.map(le)),e[23]=i,e[24]=_):_=e[24];let k;e[25]!==_?(k=[..._].map(te),e[25]=_,e[26]=k):k=e[26];let P;e[27]!==o||e[28]!==k?(P=t.jsxs("select",{value:o,onChange:H,className:"px-3 py-2 border rounded shadow-sm",children:[I,k]}),e[27]=o,e[28]=k,e[29]=P):P=e[29];let $;e[30]===Symbol.for("react.memo_cache_sentinel")?($=s=>q(s.target.value),e[30]=$):$=e[30];let L;e[31]!==a?(L=t.jsx("input",{type:"date",value:a,onChange:$,className:"px-3 py-2 border rounded shadow-sm"}),e[31]=a,e[32]=L):L=e[32],e[33]!==P||e[34]!==L?(n=t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[F,t.jsxs("div",{className:"flex gap-2",children:[P,L]})]}),e[33]=P,e[34]=L,e[35]=n):n=e[35],u=V,y="overflow-x-auto",f="min-w-full border rounded-lg overflow-hidden",e[36]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx("thead",{className:"bg-gray-100",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"#"}),t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"Borrower"}),t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"Loan No"}),t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"Principal"}),t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"Interest"}),t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"Penalty"}),t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"Total Due (₱)"})]})}),e[36]=r):r=e[36],x=z.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"text-center py-6 text-gray-500",children:"No due loans found."})}):z.map(ee),e[0]=i,e[1]=o,e[2]=a,e[3]=m,e[4]=p,e[5]=h,e[6]=x,e[7]=f,e[8]=r,e[9]=u,e[10]=y,e[11]=b,e[12]=n,e[13]=g,e[14]=c}else m=e[3],p=e[4],h=e[5],x=e[6],f=e[7],r=e[8],u=e[9],y=e[10],b=e[11],n=e[12],g=e[13],c=e[14];let j;e[37]!==x?(j=t.jsx("tbody",{children:x}),e[37]=x,e[38]=j):j=e[38];let N;e[39]!==j||e[40]!==f||e[41]!==r?(N=t.jsxs("table",{className:f,children:[r,j]}),e[39]=j,e[40]=f,e[41]=r,e[42]=N):N=e[42];let w;e[43]!==N||e[44]!==u||e[45]!==y?(w=t.jsx("div",{ref:u,className:y,children:N}),e[43]=N,e[44]=u,e[45]=y,e[46]=w):w=e[46];let T;e[47]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(X,{onClick:Z,className:"px-4 py-2 bg-[#D97706] text-sm text-white rounded shadow hover:bg-[#C49518]",children:"Print Sheet"}),e[47]=T):T=e[47];let v;e[48]!==d?(v=t.jsx("button",{onClick:()=>O(!d),className:"px-4 py-2 bg-[#FABF24] text-sm text-white rounded shadow hover:bg-[#C49518]",children:"Export"}),e[48]=d,e[49]=v):v=e[49];let C;e[50]!==d||e[51]!==p||e[52]!==h?(C=d&&t.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white border rounded shadow-md z-10",children:[t.jsx("button",{onClick:h,className:"block w-full px-4 py-2 text-left hover:bg-gray-100",children:"PDF"}),t.jsx("button",{onClick:p,className:"block w-full px-4 py-2 text-left hover:bg-gray-100",children:"CSV"})]}),e[50]=d,e[51]=p,e[52]=h,e[53]=C):C=e[53];let S;e[54]!==v||e[55]!==C?(S=t.jsxs("div",{className:"flex justify-end gap-2 mt-4 relative",children:[T,t.jsxs("div",{className:"relative",children:[v,C]})]}),e[54]=v,e[55]=C,e[56]=S):S=e[56];let D;e[57]!==w||e[58]!==S||e[59]!==b||e[60]!==n?(D=t.jsxs("div",{className:b,children:[n,w,S]}),e[57]=w,e[58]=S,e[59]=b,e[60]=n,e[61]=D):D=e[61];let E;return e[62]!==m||e[63]!==D||e[64]!==g||e[65]!==c?(E=t.jsxs(m,{breadcrumbs:g,children:[c,D]}),e[62]=m,e[63]=D,e[64]=g,e[65]=c,e[66]=E):E=e[66],E}function Z(){return window.print()}function ee(l,e){return t.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-2",children:e+1}),t.jsx("td",{className:"px-4 py-2",children:l.name??""}),t.jsx("td",{className:"px-4 py-2",children:l.loanNo??""}),t.jsx("td",{className:"px-4 py-2",children:l.principal??0}),t.jsx("td",{className:"px-4 py-2",children:l.interest??0}),t.jsx("td",{className:"px-4 py-2",children:l.penalty??0}),t.jsx("td",{className:"px-4 py-2",children:(l.total_due??0).toLocaleString()})]},l.id)}function te(l){return t.jsx("option",{value:l,children:l},l)}function le(l){return l.collector??""}function se(l){return l.join(",")}function ae(l,e){return[e+1,l.name??"",l.loanNo??"",l.principal??0,l.interest??0,l.penalty??0,l.total_due??0]}export{xe as default};
