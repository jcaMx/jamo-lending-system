import{r as i,j as e,H as D}from"./app-0d3sklFQ.js";import{A as k}from"./app-layout-BUlHJEIw.js";import"./app-DFC8ppuA.js";import"./button-BT8l82O1.js";import"./utils-CFcDjcb_.js";import"./sheet-KTeoO0_X.js";import"./index-CSfBvJPP.js";import"./index-DCpgsalv.js";import"./index-CIAlwk6f.js";import"./createLucideIcon-292lA348.js";import"./index-BpvsPxZt.js";import"./index-sJV3ACG6.js";import"./index-D_fJ_aXj.js";import"./routes-B8UsKWZ0.js";import"./app-logo-icon-BxrI132f.js";const O=[{title:"Dashboard",href:"/dashboard"},{title:"Reports",href:"/Reports"},{title:"Daily Cash Position Report",href:"/Reports/DCPR"}];function I(){const[x,g]=i.useState(""),[u,b]=i.useState("Date"),[y,p]=i.useState(!1),[r,m]=i.useState(1),c=8,h=i.useRef(null),o=[{Date:"10/15/2025",OR:"4002",Account:"JAMO NH",Amount:8650,PAYOR:"Ash Alainne",PaidAmount:8650},{Date:"10/15/2025",OR:"4003",Account:"Dental",Amount:5e3,PAYOR:"Marco Cruz",PaidAmount:5e3}].filter(t=>t[u].toString().toLowerCase().includes(x.toLowerCase())),f=o.reduce((t,s)=>t+s.Amount,0),j=o.reduce((t,s)=>t+s.PaidAmount,0),N=()=>{const t=["Date","OR","Account","Amount","PAYOR","PaidAmount"],s=o.map(a=>[a.Date,a.OR,a.Account,a.Amount,a.PAYOR,a.PaidAmount]),n="data:text/csv;charset=utf-8,"+[t,...s].map(a=>a.join(",")).join(`
`),l=document.createElement("a");l.href=encodeURI(n),l.download="Monthly_Report.csv",document.body.appendChild(l),l.click(),document.body.removeChild(l),p(!1)},A=async()=>{try{const t=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"",s=await fetch("/reports/dcpr/export-pdf",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t},body:JSON.stringify({rows:o})});if(!s.ok)throw new Error("PDF export failed");const n=await s.blob(),l=window.URL.createObjectURL(n),a=document.createElement("a");a.href=l,a.download="Monthly_Report.pdf",a.click(),p(!1)}catch(t){console.error(t),alert("Failed to export PDF. Check Laravel logs and ensure DOMPDF is installed.")}},P=()=>{if(!h.current)return;const t=window.open("","","width=900,height=650");if(!t)return;t.document.write(`
      <html>
        <head>
          <title>Daily Cash Position Report</title>
          
      <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
      <style>
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #666; padding: 6px; text-align: left; }
        th { background: #f3f3f3; }
        tfoot td { font-weight: bold; background: #f9f9f9; }
      </style>
    
        </head>
        <body class="p-10 font-sans text-gray-800">
          <header class="text-center border-b pb-6 mb-8">
            <div style="display: flex; justify-content: center;">
              <img src="/images/jamo-logo-2.png" class="h-20 mb-3" alt="Logo" />
            </div>
            <h1 class="text-2xl font-bold tracking-wide">Daily Cash Position Report</h1>
            <p class="text-sm text-gray-600 mt-1">Purok 1B Kisante, Makilala, North Cotabato Philippines</p>
            <p class="text-sm text-gray-600 mt-1">+639120313776</p>
          </header>
          <main class="prose max-w-none">${h.current.innerHTML}</main>
          <footer class="mt-12 text-center text-xs text-gray-500 border-t pt-4">Page 1</footer>
        </body>
      </html>
    `),t.document.close(),t.onload=()=>{t.focus(),t.print()}},d=Math.ceil(o.length/c),w=o.slice((r-1)*c,r*c),R=()=>m(t=>Math.max(t-1,1)),v=()=>m(t=>Math.min(t+1,d)),C=t=>m(t);return e.jsxs(k,{breadcrumbs:O,children:[e.jsx(D,{title:"Daily Cash Position Report"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Daily Cash Position Report"}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx("select",{className:"px-3 py-2 border rounded shadow-sm",value:u,onChange:t=>b(t.target.value),children:["Date","OR","Account","PAYOR"].map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("input",{type:"text",placeholder:"Search...",value:x,onChange:t=>g(t.target.value),className:"px-4 py-2 border rounded shadow-sm w-64"})]}),e.jsx("div",{ref:h,children:e.jsxs("table",{className:"min-w-full bg-white rounded shadow",children:[e.jsx("thead",{className:"bg-gray-100 text-left text-sm font-medium text-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Date"}),e.jsx("th",{className:"px-4 py-2",children:"OR"}),e.jsx("th",{className:"px-4 py-2",children:"Account"}),e.jsx("th",{className:"px-4 py-2",children:"Amount"}),e.jsx("th",{className:"px-4 py-2",children:"PAYOR"}),e.jsx("th",{className:"px-4 py-2",children:"Paid Amount"})]})}),e.jsx("tbody",{className:"text-sm text-gray-800",children:w.map((t,s)=>e.jsxs("tr",{className:"border-b last:border-none hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:t.Date}),e.jsx("td",{className:"px-4 py-2",children:t.OR}),e.jsx("td",{className:"px-4 py-2",children:t.Account}),e.jsxs("td",{className:"px-4 py-2",children:["₱",t.Amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-2",children:t.PAYOR}),e.jsxs("td",{className:"px-4 py-2",children:["₱",t.PaidAmount.toLocaleString()]})]},s))}),e.jsx("tfoot",{className:"bg-gray-100 font-semibold",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"px-4 py-2 text-right",children:"Totals:"}),e.jsxs("td",{className:"px-4 py-2",children:["₱",f.toLocaleString()]}),e.jsx("td",{className:"px-4 py-2"}),e.jsxs("td",{className:"px-4 py-2",children:["₱",j.toLocaleString()]})]})})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("div",{children:e.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",(r-1)*c+1," - ",Math.min(r*c,o.length)," of ",o.length]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:R,className:"px-3 py-1 border rounded disabled:opacity-50",disabled:r===1,children:"Prev"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:d}).map((t,s)=>{const n=s+1;return e.jsx("button",{onClick:()=>C(n),className:`px-3 py-1 rounded ${n===r?"bg-[#FDE68A]":"border"}`,children:n},n)})}),e.jsx("button",{onClick:v,className:"px-3 py-1 border rounded",disabled:r===d||d===0,children:"Next"})]})]}),e.jsxs("div",{className:"flex justify-end mt-4 gap-2 relative",children:[e.jsx("button",{onClick:P,className:"px-4 py-2 bg-[#D97706] text-white rounded shadow hover:bg-[#C49518]",children:"Print"}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>p(!y),className:"px-4 py-2 bg-[#FABF24] text-white rounded shadow hover:bg-[#C49518]",children:"Export"}),y&&e.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white border rounded shadow-md z-10",children:[e.jsx("button",{onClick:A,className:"block w-full px-4 py-2 text-left hover:bg-gray-100",children:"PDF"}),e.jsx("button",{onClick:N,className:"block w-full px-4 py-2 text-left hover:bg-gray-100",children:"CSV"})]})]})]})]})]})}export{I as default};
