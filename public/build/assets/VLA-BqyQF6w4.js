import{c as R,u as T,r as $,j as s,H as B,a as b}from"./app-0d3sklFQ.js";import{A as P}from"./app-layout-BUlHJEIw.js";import{B as y}from"./button-BT8l82O1.js";import{s as N}from"./index-ikzcNs2d.js";import"./app-DFC8ppuA.js";import"./utils-CFcDjcb_.js";import"./sheet-KTeoO0_X.js";import"./index-CSfBvJPP.js";import"./index-DCpgsalv.js";import"./index-CIAlwk6f.js";import"./createLucideIcon-292lA348.js";import"./index-BpvsPxZt.js";import"./index-sJV3ACG6.js";import"./index-D_fJ_aXj.js";import"./routes-B8UsKWZ0.js";import"./app-logo-icon-BxrI132f.js";const V=[{title:"Dashboard",href:"/dashboard"},{title:"Loans",href:"/Loans"},{title:"View Loan Applications",href:"/Loans/VLA"}];function ae(){const e=R.c(23),{props:w}=T(),g=w.loanApplications||[],[r,L]=$.useState("");let m;e[0]!==r?(m=t=>`${t.borrower.first_name} ${t.borrower.last_name}`.toLowerCase().includes(r.toLowerCase()),e[0]=r,e[1]=m):m=e[1];const A=g.filter(z).filter(m),v=q,_=H,f=P,j=V;let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(B,{title:"View Loan Applications"}),e[2]=a):a=e[2];const S="p-6";let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Pending Loans"}),s.jsx(y,{onClick:k,className:"bg-yellow-600 text-white hover:bg-yellow-700",children:"Add Loan"})]}),e[3]=o):o=e[3];let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=t=>L(t.target.value),e[4]=d):d=e[4];let l;e[5]!==r?(l=s.jsx("div",{className:"flex mb-4 gap-2",children:s.jsx("input",{type:"text",placeholder:"Search Borrower...",value:r,onChange:d,className:"px-4 py-2 border rounded shadow-sm w-64"})}),e[5]=r,e[6]=l):l=e[6];const C="min-w-full bg-white rounded shadow";let c;e[7]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100 text-left text-sm font-medium text-gray-700",children:[s.jsx("th",{className:"px-4 py-2",children:"Borrower"}),s.jsx("th",{className:"px-4 py-2",children:"Loan No."}),s.jsx("th",{className:"px-4 py-2",children:"Principal"}),s.jsx("th",{className:"px-4 py-2",children:"Interest"}),s.jsx("th",{className:"px-4 py-2",children:"Term"}),s.jsx("th",{className:"px-4 py-2",children:"Repayment"}),s.jsx("th",{className:"px-4 py-2",children:"Interest Type"}),s.jsx("th",{className:"px-4 py-2",children:"Collateral"}),s.jsx("th",{className:"px-4 py-2",children:"Co-borrower"}),s.jsx("th",{className:"px-4 py-2",children:"Action"})]})}),e[7]=c):c=e[7];const E="text-sm text-gray-800";let x;e[8]===Symbol.for("react.memo_cache_sentinel")?(x=t=>s.jsxs("tr",{className:"border-b last:border-none",children:[s.jsxs("td",{className:"px-4 py-2",children:[t.borrower.first_name," ",t.borrower.last_name]}),s.jsx("td",{className:"px-4 py-2",children:t.id}),s.jsx("td",{className:"px-4 py-2",children:t.principal_amount}),s.jsxs("td",{className:"px-4 py-2",children:[t.interest_rate,"%"]}),s.jsxs("td",{className:"px-4 py-2",children:[t.term_months," months"]}),s.jsx("td",{className:"px-4 py-2",children:t.repayment_frequency}),s.jsx("td",{className:"px-4 py-2",children:t.interest_type}),s.jsx("td",{className:"px-4 py-2",children:t.collateral?"Yes":"No"}),s.jsx("td",{className:"px-4 py-2",children:t.borrower.co_borrowers?.length?"Yes":"No"}),s.jsxs("td",{className:"px-4 py-2 flex gap-2",children:[s.jsx(y,{onClick:()=>v(t.id),className:"bg-green-600 text-white hover:bg-green-700",children:"Approve"}),s.jsx(y,{onClick:()=>_(t.id),className:"bg-red-600 text-white hover:bg-red-700",children:"Reject"})]})]},t.id),e[8]=x):x=e[8];const u=A.map(x);let n;e[9]!==u?(n=s.jsx("tbody",{className:E,children:u}),e[9]=u,e[10]=n):n=e[10];let i;e[11]!==n||e[12]!==c?(i=s.jsxs("table",{className:C,children:[c,n]}),e[11]=n,e[12]=c,e[13]=i):i=e[13];let p;e[14]!==i||e[15]!==o||e[16]!==l?(p=s.jsxs("div",{className:S,children:[o,l,i]}),e[14]=i,e[15]=o,e[16]=l,e[17]=p):p=e[17];let h;return e[18]!==f||e[19]!==j||e[20]!==p||e[21]!==a?(h=s.jsxs(f,{breadcrumbs:j,children:[a,p]}),e[18]=f,e[19]=j,e[20]=p,e[21]=a,e[22]=h):h=e[22],h}function k(){return b.visit("/Loans/AddLoan")}function H(e){b.post(N("loans.reject",e),{},{onSuccess:()=>alert(`Loan ${e} rejected successfully!`),onError:Y})}function Y(e){return console.error(e)}function q(e){b.post(N("loans.approve",e),{},{onSuccess:()=>alert(`Loan ${e} approved successfully!`),onError:D})}function D(e){return console.error(e)}function z(e){return e.status==="Pending"}export{ae as default};
