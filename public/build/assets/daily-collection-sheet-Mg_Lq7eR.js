import{c as z,r as L,j as t,a as K,H as U}from"./app-0d3sklFQ.js";import{A as W}from"./app-layout-BUlHJEIw.js";import{B as A}from"./button-BT8l82O1.js";import"./app-DFC8ppuA.js";import"./utils-CFcDjcb_.js";import"./sheet-KTeoO0_X.js";import"./index-CSfBvJPP.js";import"./index-DCpgsalv.js";import"./index-CIAlwk6f.js";import"./createLucideIcon-292lA348.js";import"./index-BpvsPxZt.js";import"./index-sJV3ACG6.js";import"./index-D_fJ_aXj.js";import"./routes-B8UsKWZ0.js";import"./app-logo-icon-BxrI132f.js";const q=[{title:"Daily Collection Sheet",href:"/daily-collections"}];function xe(l){const e=z.c(42),{due_loans:H,collectors:B}=l,[r,I]=L.useState(""),[a,$]=L.useState(""),[n,F]=L.useState(!1),T=L.useRef(null),o=H;let g;e[0]!==r||e[1]!==a?(g=()=>{K.get("/daily-collections",{collector:r||void 0,date:a||void 0},{preserveState:!0,replace:!0})},e[0]=r,e[1]=a,e[2]=g):g=e[2];const E=g;let j;e[3]!==o?(j=()=>{const s=["#","Borrower","Loan No","Principal","Interest","Penalty","Total Due (₱)"],O=o.map(Y),V="data:text/csv;charset=utf-8,"+[s,...O].map(X).join(`
`),b=document.createElement("a");b.href=encodeURI(V),b.download="Daily_Collection_Sheet.csv",document.body.appendChild(b),b.click(),document.body.removeChild(b),F(!1)},e[3]=o,e[4]=j):j=e[4];const R=j;let N;e[5]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{if(!T.current)return;const s=window.open("","","width=900,height=650");s&&(s.document.write(`
      <html>
        <head>
          <title>Daily Collection Sheet</title>
          
      <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
      <style>
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #666; padding: 6px; text-align: left; }
        th { background: #f3f3f3; }
      </style>
    
        </head>
        <body class="p-10 font-sans text-gray-800">
          <header class="text-center border-b pb-6 mb-8">
            <div style="display: flex; justify-content: center;">
              <img src="/images/jamo-logo-2.png" class="h-20 mb-3" alt="Logo" />
            </div>
            <h1 class="text-2xl font-bold tracking-wide">Daily Collection Sheet</h1>
            <p class="text-sm text-gray-600 mt-1">Purok 1B Kisante, Makilala, North Cotabato Philippines</p>
            <p class="text-sm text-gray-600 mt-1">+639120313776</p>
          </header>
          <main class="prose max-w-none">${T.current.innerHTML}</main>
          <footer class="mt-12 text-center text-xs text-gray-500 border-t pt-4">Page 1</footer>
        </body>
      </html>
    `),s.document.close(),s.onload=()=>s.print(),F(!1))},e[5]=N):N=e[5];const M=N;let w;e[6]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(U,{title:"Daily Collection Sheet"}),e[6]=w):w=e[6];let v;e[7]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Daily Collection Sheet"}),e[7]=v):v=e[7];let S;e[8]===Symbol.for("react.memo_cache_sentinel")?(S=s=>I(s.target.value),e[8]=S):S=e[8];let C;e[9]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx("option",{value:"",children:"All Collectors"}),e[9]=C):C=e[9];let i;e[10]!==B?(i=B.map(Q),e[10]=B,e[11]=i):i=e[11];let c;e[12]!==r||e[13]!==i?(c=t.jsxs("select",{value:r,onChange:S,className:"px-3 py-2 border rounded shadow-sm",children:[C,i]}),e[12]=r,e[13]=i,e[14]=c):c=e[14];let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=s=>$(s.target.value),e[15]=_):_=e[15];let d;e[16]!==a?(d=t.jsx("input",{type:"date",value:a,onChange:_,className:"px-3 py-2 border rounded shadow-sm"}),e[16]=a,e[17]=d):d=e[17];let m;e[18]!==E?(m=t.jsx(A,{onClick:E,className:"px-4 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-700",children:"Filter"}),e[18]=E,e[19]=m):m=e[19];let p;e[20]!==d||e[21]!==m||e[22]!==c?(p=t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v,t.jsxs("div",{className:"flex gap-2",children:[c,d,m]})]}),e[20]=d,e[21]=m,e[22]=c,e[23]=p):p=e[23];let D;e[24]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx("thead",{className:"bg-gray-100",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"#"}),t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"Borrower"}),t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"Loan No"}),t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"Principal"}),t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"Interest"}),t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"Penalty"}),t.jsx("th",{className:"px-4 py-2 text-left font-medium text-gray-700",children:"Total Due (₱)"})]})}),e[24]=D):D=e[24];let h;e[25]!==o?(h=o.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"text-center py-6 text-gray-500",children:"No due loans found."})}):o.map(J),e[25]=o,e[26]=h):h=e[26];let x;e[27]!==h?(x=t.jsx("div",{ref:T,className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full border rounded-lg overflow-hidden",children:[D,t.jsx("tbody",{children:h})]})}),e[27]=h,e[28]=x):x=e[28];let k;e[29]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(A,{onClick:G,className:"px-4 py-2 bg-[#D97706] text-sm text-white rounded shadow hover:bg-[#C49518]",children:"Print Sheet"}),e[29]=k):k=e[29];let f;e[30]!==n?(f=t.jsx("button",{onClick:()=>F(!n),className:"px-4 py-2 bg-[#FABF24] text-sm text-white rounded shadow hover:bg-[#C49518]",children:"Export"}),e[30]=n,e[31]=f):f=e[31];let u;e[32]!==n||e[33]!==R?(u=n&&t.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white border rounded shadow-md z-10",children:[t.jsx("button",{onClick:M,className:"block w-full px-4 py-2 text-left hover:bg-gray-100",children:"PDF"}),t.jsx("button",{onClick:R,className:"block w-full px-4 py-2 text-left hover:bg-gray-100",children:"CSV"})]}),e[32]=n,e[33]=R,e[34]=u):u=e[34];let y;e[35]!==f||e[36]!==u?(y=t.jsxs("div",{className:"flex justify-end gap-2 mt-4 relative",children:[k,t.jsxs("div",{className:"relative",children:[f,u]})]}),e[35]=f,e[36]=u,e[37]=y):y=e[37];let P;return e[38]!==p||e[39]!==x||e[40]!==y?(P=t.jsxs(W,{breadcrumbs:q,children:[w,t.jsxs("div",{className:"bg-white rounded-lg  p-6 space-y-4",children:[p,x,y]})]}),e[38]=p,e[39]=x,e[40]=y,e[41]=P):P=e[41],P}function G(){return window.print()}function J(l,e){return t.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-2",children:e+1}),t.jsx("td",{className:"px-4 py-2",children:l.name??""}),t.jsx("td",{className:"px-4 py-2",children:l.loanNo??""}),t.jsx("td",{className:"px-4 py-2",children:l.principal.toLocaleString()}),t.jsx("td",{className:"px-4 py-2",children:l.interest.toLocaleString()}),t.jsx("td",{className:"px-4 py-2",children:l.penalty.toLocaleString()}),t.jsx("td",{className:"px-4 py-2",children:l.total_due.toLocaleString()})]},l.id)}function Q(l){return t.jsx("option",{value:l,children:l},l)}function X(l){return l.join(",")}function Y(l,e){return[e+1,l.name??"",l.loanNo??"",l.principal??0,l.interest??0,l.penalty??0,l.total_due??0]}export{xe as default};
